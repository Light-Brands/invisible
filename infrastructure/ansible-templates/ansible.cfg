[defaults]
# Inventory file
inventory = inventory/production.yml

# SSH settings
host_key_checking = False
private_key_file = ssh-keys/infrastructure-master
remote_user = root
timeout = 30

# Performance
forks = 10
gathering = smart
fact_caching = jsonfile
fact_caching_connection = /tmp/ansible-facts
fact_caching_timeout = 3600

# Logging
log_path = logs/ansible.log

# Privilege escalation
become = True
become_method = sudo
become_user = root

[ssh_connection]
# Route all SSH through Tor SOCKS proxy
ssh_args = -o ProxyCommand="nc -X 5 -x 127.0.0.1:9150 %h %p" -o ControlMaster=auto -o ControlPersist=60s
pipelining = True
control_path = /tmp/ansible-ssh-%%h-%%p-%%r
